<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Monitoring of Transformer System</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
        <link rel="stylesheet" href="css/sensor&meter.css">
        <link rel="icon" href="IMPROTECHS.jpg">
        <script src="js/sensor&meter.js"></script>
        <!-- <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script> -->
    
    </head>

    <body>
        <div class="topbar">
            <div class="topbar_left">
                <h2 id="label_tran_ID">Transformer ID:</h2>
                <input type="text" id="box_tran_ID" placeholder="Input Topic" disabled>
                <button id="button_read_data" disabled onclick="call_data()" ><span class="button_readdata">READ</span></button>
                <button id="button_stopread_data" disabled onclick="stop_data()" ><span class="button_stopreaddata">STOP</span></button>
            </div>

            <div class="topbar_center">
                <h1 id="label_title_topbar">Monitoring of Transformer System</h1>
            </div>

            <div class="topbar_right">
                <h2 id="label_user_name">User Name:</h2>
                <input type="text" id="box_user_name"  placeholder="IMPRO TECH" >
                <button id="button_connect" disabled  onclick="button_connect()">CONNECT</button>
            </div>
        </div>

    <div class="CONTAINT">
        <div class="midlebar">
            <div class="totaldata">
                <div class="total_consumsion">
                    <div class="top_total_consumsion">
                        <input type="text" id="openGoogleMap" disabled onclick="openGoogleMap()" placeholder="Location Of Transformer" readonly>
                        <h3>TOTAL CONSUMSION</h3>
                        <input type="text" id="display_tran_ID" placeholder="TRANSFORMER ID" readonly>
                        <hr style="width: 1338px; position: absolute;  margin-top: 80px;"/>
                    </div>


                    <div class="bottom_total_consumsion">
                        <table class="table_consumsion" id="dataDisplay">
                            <tr>
                                <th class="units">Data Parameter</th>
                                <td>Unit</td>
                                <td>Neutral</td>
                                <td>Phase A</td>
                                <td>Phase B</td>
                                <td>Phase C</td>
                                <td>Total</td>
                            </tr>
                            
                            <tr>
                                <td class="parameter">Active Power</td>
                                <td>W</td>
                                <td id="total1_neutral"></td>
                                <td id="total1_phaseA" ></td>
                                <td id="total1_phaseB"></td>
                                <td id="total1_phaseC"></td>
                                <td id="total1_Total"></td>
                            </tr>

                            <tr>
                                <td class="parameter">Reactive Power</td>
                                <td>VAR</td>
                                <td id="total2_neutral"></td>
                                <td id="total2_phaseA"></td>
                                <td id="total2_phaseB"></td>
                                <td id="total2_phaseC"></td>
                                <td id="total2_Total"></td>
                            </tr>

                            <tr>
                                <td class="parameter">Apparent</td>
                                <td>VA</td>
                                <td id="total3_neutral"></td>
                                <td id="total3_phaseA"></td>
                                <td id="total3_phaseB"></td>
                                <td id="total3_phaseC"></td>
                                <td id="total3_Total"></td>
                            </tr>

                            <tr>
                                <td class="parameter">Voltage</td>
                                <td>V</td>
                                <td id="total4_neutral"></td>
                                <td id="total4_phaseA"></td>
                                <td id="total4_phaseB"></td>
                                <td id="total4_phaseC"></td>
                                <td id="total4_Total"></td>
                            </tr>

                            <tr>
                                <td class="parameter">Current</td>
                                <td>A</td>
                                <td id="total5_neutral"></td>
                                <td id="total5_phaseA"></td>
                                <td id="total5_phaseB"></td>
                                <td id="total5_phaseC"></td>
                                <td id="total5_Total"></td>
                            </tr>

                            <tr>
                                <td class="parameter">Power Factor</td>
                                <td>PF</td>
                                <td id="total6_neutral"></td>
                                <td id="total6_phaseA"></td>
                                <td id="total6_phaseB"></td>
                                <td id="total6_phaseC"></td>
                                <td id="total6_Total"></td>
                            </tr>

                            <tr>
                                <td class="parameter">Zero Sequence Current</td>
                                <td>A</td>
                                <td id="total7_neutral"></td>
                                <td id="total7_phaseA"></td>
                                <td id="total7_phaseB"></td>
                                <td id="total7_phaseC"></td>
                                <td id="total7_Total"></td>
                            </tr>

                            <tr>
                                <td class="parameter">Current Unbalance</td>
                                <td></td>
                                <td id="total8_neutral"></td>
                                <td id="total8_phaseA"></td>
                                <td id="total8_phaseB"></td>
                                <td id="total8_phaseC"></td>
                                <td id="total8_Total"></td>
                                
                            </tr>

                            <tr>
                                <td class="parameter">Energy</td>
                                <td>kWh</td>
                                <td id="total9_neutral"></td>
                                <td id="total9_phaseA"></td>
                                <td id="total9_phaseB"></td>
                                <td id="total9_phaseC"></td>
                                <td id="total9_Total"></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="total_customer">
                <div class="box_customer1">
                    <span class="feeder_name">FEEDER 1:</span>
                    <!-- <span class="feeder_Id">ID: 000001</span> -->
                    <hr style="width: 658px; position:absolute;  "/>
                    <table>
                        <tr>
                            <th class="units">Data Parameter</th>
                            <td>Unit</td>
                            <td>Neutral</td>
                            <td>Phase A</td>
                            <td>Phase B</td>
                            <td>Phase C</td>
                            <td>Total</td>
                        </tr>
                        
                        <tr>
                            <td class="parameter">Active Power</td>
                            <td>W</td>
                            <td id="feeder11_neutral"></td>
                            <td id="feeder11_phaseA"></td>
                            <td id="feeder11_phaseB"></td>
                            <td id="feeder11_phaseC"></td>
                            <td id="feeder11_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Reactive Power</td>
                            <td>VAR</td>
                            <td id="feeder12_neutral"></td>
                            <td id="feeder12_phaseA"></td>
                            <td id="feeder12_phaseB"></td>
                            <td id="feeder12_phaseC"></td>
                            <td id="feeder12_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Apparent</td>
                            <td>VA</td>
                            <td id="feeder13_neutral"></td>
                            <td id="feeder13_phaseA"></td>
                            <td id="feeder13_phaseB"></td>
                            <td id="feeder13_phaseC"></td>
                            <td id="feeder13_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Voltage</td>
                            <td>V</td>
                            <td id="feeder14_neutral"></td>
                            <td id="feeder14_phaseA"></td>
                            <td id="feeder14_phaseB"></td>
                            <td id="feeder14_phaseC"></td>
                            <td id="feeder14_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current</td>
                            <td>A</td>
                            <td id="feeder15_neutral"></td>
                            <td id="feeder15_phaseA"></td>
                            <td id="feeder15_phaseB"></td>
                            <td id="feeder15_phaseC"></td>
                            <td id="feeder15_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Power Factor</td>
                            <td>PF</td>
                            <td id="feeder16_neutral"></td>
                            <td id="feeder16_phaseA"></td>
                            <td id="feeder16_phaseB"></td>
                            <td id="feeder16_phaseC"></td>
                            <td id="feeder16_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Zero Sequence Current</td>
                            <td>A</td>
                            <td id="feeder17_neutral"></td>
                            <td id="feeder17_phaseA"></td>
                            <td id="feeder17_phaseB"></td>
                            <td id="feeder17_phaseC"></td>
                            <td id="feeder17_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current Unbalance</td>
                            <td></td>
                            <td id="feeder18_neutral"></td>
                            <td id="feeder18_phaseA"></td>
                            <td id="feeder18_phaseB"></td>
                            <td id="feeder18_phaseC"></td>
                            <td id="feeder18_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Energy</td>
                            <td>kWh</td>
                            <td id="feeder19_neutral"></td>
                            <td id="feeder19_phaseA"></td>
                            <td id="feeder19_phaseB"></td>
                            <td id="feeder19_phaseC"></td>
                            <td id="feeder19_Total"></td>
                        </tr>
                    </table>
                </div>

                <div class="box_customer2">
                    <span class="feeder_name">FEEDER 2:</span>
                    <!-- <span class="feeder_Id">ID: 000001</span> -->
                    <hr style="width: 658px; position:absolute;  "/>
                    <table>
                        <tr>
                            <th class="units">Data Parameter</th>
                            <td>Unit</td>
                            <td>Neutral</td>
                            <td>Phase A</td>
                            <td>Phase B</td>
                            <td>Phase C</td>
                            <td>Total</td>
                        </tr>
                        
                        <tr>
                            <td class="parameter">Active Power</td>
                            <td>W</td>
                            <td id="feeder21_neutral"></td>
                            <td id="feeder21_phaseA"></td>
                            <td id="feeder21_phaseB"></td>
                            <td id="feeder21_phaseC"></td>
                            <td id="feeder21_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Reactive Power</td>
                            <td>VAR</td>
                            <td id="feeder22_neutral"></td>
                            <td id="feeder22_phaseA"></td>
                            <td id="feeder22_phaseB"></td>
                            <td id="feeder22_phaseC"></td>
                            <td id="feeder22_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Apparent</td>
                            <td>VA</td>
                            <td id="feeder23_neutral"></td>
                            <td id="feeder23_phaseA"></td>
                            <td id="feeder23_phaseB"></td>
                            <td id="feeder23_phaseC"></td>
                            <td id="feeder23_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Voltage</td>
                            <td>V</td>
                            <td id="feeder24_neutral"></td>
                            <td id="feeder24_phaseA"></td>
                            <td id="feeder24_phaseB"></td>
                            <td id="feeder24_phaseC"></td>
                            <td id="feeder24_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current</td>
                            <td>A</td>
                            <td id="feeder25_neutral"></td>
                            <td id="feeder25_phaseA"></td>
                            <td id="feeder25_phaseB"></td>
                            <td id="feeder25_phaseC"></td>
                            <td id="feeder25_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Power Factor</td>
                            <td>PF</td>
                            <td id="feeder26_neutral"></td>
                            <td id="feeder26_phaseA"></td>
                            <td id="feeder26_phaseB"></td>
                            <td id="feeder26_phaseC"></td>
                            <td id="feeder26_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Zero Sequence Current</td>
                            <td>A</td>
                            <td id="feeder27_neutral"></td>
                            <td id="feeder27_phaseA"></td>
                            <td id="feeder27_phaseB"></td>
                            <td id="feeder27_phaseC"></td>
                            <td id="feeder27_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current Unbalance</td>
                            <td></td>
                            <td id="feeder28_neutral"></td>
                            <td id="feeder28_phaseA"></td>
                            <td id="feeder28_phaseB"></td>
                            <td id="feeder28_phaseC"></td>
                            <td id="feeder28_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Energy</td>
                            <td>kWh</td>
                            <td id="feeder29_neutral"></td>
                            <td id="feeder29_phaseA"></td>
                            <td id="feeder29_phaseB"></td>
                            <td id="feeder29_phaseC"></td>
                            <td id="feeder29_Total"></td>
                        </tr>
                    </table>
                </div>

                <div class="box_customer3">
                    <span class="feeder_name">FEEDER 3:</span>
                    <!-- <span class="feeder_Id">ID: 000001</span> -->
                    <hr style="width: 658px; position:absolute;  "/>
                    <table>
                        <tr>
                            <th class="units">Data Parameter</th>
                            <td>Unit</td>
                            <td>Neutral</td>
                            <td>Phase A</td>
                            <td>Phase B</td>
                            <td>Phase C</td>
                            <td>Total</td>
                        </tr>
                        
                        <tr>
                            <td class="parameter">Active Power</td>
                            <td>W</td>
                            <td id="feeder31_neutral"></td>
                            <td id="feeder31_phaseA"></td>
                            <td id="feeder31_phaseB"></td>
                            <td id="feeder31_phaseC"></td>
                            <td id="feeder31_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Reactive Power</td>
                            <td>VAR</td>
                            <td id="feeder32_neutral"></td>
                            <td id="feeder32_phaseA"></td>
                            <td id="feeder32_phaseB"></td>
                            <td id="feeder32_phaseC"></td>
                            <td id="feeder32_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Apparent</td>
                            <td>VA</td>
                            <td id="feeder33_neutral"></td>
                            <td id="feeder33_phaseA"></td>
                            <td id="feeder33_phaseB"></td>
                            <td id="feeder33_phaseC"></td>
                            <td id="feeder33_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Voltage</td>
                            <td>V</td>
                            <td id="feeder34_neutral"></td>
                            <td id="feeder34_phaseA"></td>
                            <td id="feeder34_phaseB"></td>
                            <td id="feeder34_phaseC"></td>
                            <td id="feeder34_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current</td>
                            <td>A</td>
                            <td id="feeder35_neutral"></td>
                            <td id="feeder35_phaseA"></td>
                            <td id="feeder35_phaseB"></td>
                            <td id="feeder35_phaseC"></td>
                            <td id="feeder35_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Power Factor</td>
                            <td>PF</td>
                            <td id="feeder36_neutral"></td>
                            <td id="feeder36_phaseA"></td>
                            <td id="feeder36_phaseB"></td>
                            <td id="feeder36_phaseC"></td>
                            <td id="feeder36_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Zero Sequence Current</td>
                            <td>A</td>
                            <td id="feeder37_neutral"></td>
                            <td id="feeder37_phaseA"></td>
                            <td id="feeder37_phaseB"></td>
                            <td id="feeder37_phaseC"></td>
                            <td id="feeder37_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current Unbalance</td>
                            <td></td>
                            <td id="feeder38_neutral"></td>
                            <td id="feeder38_phaseA"></td>
                            <td id="feeder38_phaseB"></td>
                            <td id="feeder38_phaseC"></td>
                            <td id="feeder38_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Energy</td>
                            <td>kWh</td>
                            <td id="feeder39_neutral"></td>
                            <td id="feeder39_phaseA"></td>
                            <td id="feeder39_phaseB"></td>
                            <td id="feeder39_phaseC"></td>
                            <td id="feeder39_Total"></td>
                        </tr>
                    </table>
                </div>

                <div class="box_customer4">
                    <span class="feeder_name">FEEDER 4:</span>
                    <!-- <span class="feeder_Id">ID: 000001</span> -->
                    <hr style="width: 658px; position:absolute;  "/>
                    <table>
                        <tr>
                            <th class="units">Data Parameter</th>
                            <td>Unit</td>
                            <td>Neutral</td>
                            <td>Phase A</td>
                            <td>Phase B</td>
                            <td>Phase C</td>
                            <td>Total</td>
                        </tr>
                        
                        <tr>
                            <td class="parameter">Active Power</td>
                            <td>W</td>
                            <td id="feeder41_neutral"></td>
                            <td id="feeder41_phaseA"></td>
                            <td id="feeder41_phaseB"></td>
                            <td id="feeder41_phaseC"></td>
                            <td id="feeder41_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Reactive Power</td>
                            <td>VAR</td>
                            <td id="feeder42_neutral"></td>
                            <td id="feeder42_phaseA"></td>
                            <td id="feeder42_phaseB"></td>
                            <td id="feeder42_phaseC"></td>
                            <td id="feeder42_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Apparent</td>
                            <td>VA</td>
                            <td id="feeder43_neutral"></td>
                            <td id="feeder43_phaseA"></td>
                            <td id="feeder43_phaseB"></td>
                            <td id="feeder43_phaseC"></td>
                            <td id="feeder43_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Voltage</td>
                            <td>V</td>
                            <td id="feeder44_neutral"></td>
                            <td id="feeder44_phaseA"></td>
                            <td id="feeder44_phaseB"></td>
                            <td id="feeder44_phaseC"></td>
                            <td id="feeder44_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current</td>
                            <td>A</td>
                            <td id="feeder45_neutral"></td>
                            <td id="feeder45_phaseA"></td>
                            <td id="feeder45_phaseB"></td>
                            <td id="feeder45_phaseC"></td>
                            <td id="feeder45_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Power Factor</td>
                            <td>PF</td>
                            <td id="feeder46_neutral"></td>
                            <td id="feeder46_phaseA"></td>
                            <td id="feeder46_phaseB"></td>
                            <td id="feeder46_phaseC"></td>
                            <td id="feeder46_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Zero Sequence Current</td>
                            <td>A</td>
                            <td id="feeder47_neutral"></td>
                            <td id="feeder47_phaseA"></td>
                            <td id="feeder47_phaseB"></td>
                            <td id="feeder47_phaseC"></td>
                            <td id="feeder47_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Current Unbalance</td>
                            <td></td>
                            <td id="feeder48_neutral"></td>
                            <td id="feeder48_phaseA"></td>
                            <td id="feeder48_phaseB"></td>
                            <td id="feeder48_phaseC"></td>
                            <td id="feeder48_Total"></td>
                        </tr>

                        <tr>
                            <td class="parameter">Energy</td>
                            <td>kWh</td>
                            <td id="feeder49_neutral"></td>
                            <td id="feeder49_phaseA"></td>
                            <td id="feeder49_phaseB"></td>
                            <td id="feeder49_phaseC"></td>
                            <td id="feeder49_Total"></td>
                        </tr>
                    </table>
                </div>
     
                <div class="bottombar">
                    <h2 id="powerby">PowerBy: IMPRO TEK <span>Contact Us: 098 267 326 Thlang Jen</span></h2>
                </div>
            </div>
        </div>
    </div>
        
        <script>
            const idInput = document.getElementById('box_user_name');
            const connectButton = document.getElementById('button_connect');
        
            idInput.addEventListener('input', validateInput);
                
            function validateInput() {
                const inputValue = idInput.value.trim();
                const isValidInput = inputValue !== '';
            
                connectButton.disabled = !isValidInput;
                connectButton.textContent = "CONNECT";
                connectButton.style.backgroundColor = "greenyellow"; 
            
                if (!isValidInput) {
                    console.log('Please input your ID name.');
                 // connectButton.style.Color = "darkgray";
                }
            }


            const TFIDInput = document.getElementById('box_tran_ID');
            const buttonreaddata = document.getElementById('button_read_data');
            const buttonstopreaddata = document.getElementById('button_stopread_data');

            TFIDInput.addEventListener('input', ValidateInput);

            function ValidateInput() {
                const inputvalue = TFIDInput.value.trim();
                const isvalidInput = inputvalue !== '';
        
                // Button READ
                buttonreaddata.disabled = !isvalidInput;
                buttonreaddata.style.backgroundColor = "greenyellow";
                
                // Button STOPREAD
                buttonstopreaddata.textContent = 'STOP';
                buttonstopreaddata.style.backgroundColor = 'rgb(218, 207, 207)';


                if (!isvalidInput) {
                    console.log('Please input TFID .');         
                }
            }

            function openGoogleMap() {
                // Get the input text value
                var inputLocation = document.getElementById('openGoogleMap').value.trim();

                // Open Google Maps with the specified location
                window.open('https://www.google.com/maps/place/' + inputLocation, '_blank');
            }
                            
        </script> 
    </body>
</html>